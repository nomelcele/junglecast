<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="main">

	<select id="categoryList" resultType="cvo">
		SELECT * FROM CATEGORY
	</select>

	<select id="articleList" resultType ="mavo">
		SELECT ROWNUM, alias.*
			FROM(
				SELECT a.article_id, a.article_title, a.pic_id, a.category_id, p.pic_url FROM ARTICLE a, PICTURE p WHERE a.pic_id = p.pic_id ORDER BY article_id DESC
			)alias
		WHERE ROWNUM <![CDATA[<=]]> 20
	</select>
	
	<select id="thisCategoryList" resultType ="mavo" parameterType="int">
		SELECT ROWNUM, alias.*
			FROM(
				SELECT a.article_id, a.article_title, a.pic_id, a.category_id, p.pic_url FROM ARTICLE a, PICTURE p 
					WHERE a.pic_id = p.pic_id and a.category_id = #{category_id} ORDER BY article_id DESC
			)alias
		WHERE ROWNUM <![CDATA[<=]]> 20
	</select>
  </mapper>

  